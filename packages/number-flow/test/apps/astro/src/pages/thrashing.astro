---
import Layout from '../layouts/Layout.astro'
import { renderInnerHTML } from 'number-flow'
---

<Layout>
	<number-flow-group>
		<number-flow
			id="flow1"
			data-testid="flow1"
			set:html={renderInnerHTML(42)}
		/><number-flow id="flow2" data-testid="flow2" set:html={renderInnerHTML(42)} />
	</number-flow-group>
</Layout>

<script>
	import 'number-flow'
	import 'number-flow/group'

	const [flow1, flow2] = document.getElementsByTagName('number-flow')

	if (flow1 && flow2) {
		flow1.update(42)
		flow2.update(42)

		window.addEventListener('load', () => {
			setTimeout(() => {
				flow1.format = { style: 'currency', currency: 'USD' }
				flow1.numberSuffix = '/mo'
				flow2.format = { style: 'currency', currency: 'USD' }
				flow2.numberSuffix = '/mo'

				flow1.update(1250.50)
				flow2.update(1250.50)
			}, 3000)
		})
	}
</script>
